{% extends "base.html" %}
{% block content %}

<h1>Editar </h1>
<form action="{{ url_for('record.edit', id=record.idRecords) }}" method="POST">
    <div class="form-group">
        <label for="dataEntry">Entrada:</label>
        <input type="datetime-local" name="dataEntry" id="dataEntry" class="form-control" 
               value="{{ record.dataEntry.strftime('%Y-%m-%dT%H:%M') }}" required>
    </div>

    <div class="form-group">
        <label for="dataExit">Salida:</label>
        <input type="datetime-local" name="dataExit" id="dataExit" class="form-control"
               value="{{ record.dataExit.strftime('%Y-%m-%dT%H:%M') }}" required>
    </div>

   <!-- Campo Aprendiz -->
    <div class="mb-3">
    <label for="apprenticeId" class="form-label">Aprendiz:</label>
    <select name="apprenticeId" id="apprenticeId" class="form-select" required>
        <option value="" disabled>- Seleccionar Aprendiz -</option>
        {% for apprentice in adata %}
        <option value="{{ apprentice.idUser }}"
            {% if apprentice.idUser == record.apprenticeId|int %} selected {% endif %}>
            {{ apprentice.documento }}
        </option>
        {% endfor %}
    </select>
    <div class="invalid-feedback">
        selecciona un aprendiz.
    </div>
    </div>

    <div class="form-group">
        <label for="equipmentId">Equipo:</label>
        <select name="equipmentId" id="equipmentId" class="form-control" required>
            {% for equipment in equipment %}
                <option value="{{ equipment.idEquipment }}" 
                        {% if equipment.idEquipment == record.equipmentId %} selected {% endif %}>
                    {{ equipment.codeEquipment }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Campo Celador -->
    <div class="mb-3">
        <label for="wachimanId" class="form-label">Celador:</label>
        <select class="form-select" id="wachimanId" name="wachimanId" required>
            <option value="" disabled>- Seleccionar Celador -</option>
            {% for celador in wdata %}
            <option value="{{ celador.idUser }}"
                {% if celador.idUser == record.wachimanId|int %} selected {% endif %}>
                {{ celador.documento }}
            </option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
</form>

<a href="{{ url_for('roomLoan.index') }}" class="btn btn-secondary">Volver</a>
{% endblock %}
